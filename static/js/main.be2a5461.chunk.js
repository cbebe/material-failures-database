(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{217:function(e,t,a){e.exports=a(473)},447:function(e,t,a){},473:function(e,t,a){"use strict";a.r(t);a(218),a(267),a(447);var n=a(0),i=a.n(n),r=a(210),o=a.n(r),l=a(34),s=a.n(l),c=a(52),u=a(28),m={viewer:"fa-viewer",referenceList:{list:"fa-reference-list",reference:"fa-reference"},visibility:{on:"fa-visibility-on",off:"fa-visibility-off"},caseStudyLink:"fa-case-study-link",recordLink:"fa-record-link",displayItem:"fa-display-item",displayImage:"fa-display-image",mainHeader:"fa-main-header",loading:"fa-loading"},d="fa-record",p="fa-title",h="fa-module",g="fa-submodule",f="fa-module-header",b="fa-submodule-header",y="fa-line",v="fa-li-lines",_="fa-ul-lines",E="fa-case-study",x={wrapper:"fa-download-wrapper",button:"fa-download-button"},C={on:"fa-visibility-on",off:"fa-visibility-off"},k={page:"fa-pagination",next:"fa-pagination-next",prev:"fa-pagination-prev"},j={wrapper:"fa-landing-wrapper",page:"fa-landing-page",title:"fa-landing-title",caseTitle:"fa-landing-case-title",caseNumber:"fa-landing-case-number",status:"fa-landing-status",logo:"fa-landing-logo"},w={wrapper:"fa-photo-evidence-wrapper",page:"fa-photo-evidence-page",title:"fa-photo-evidence-title"},T={wrapper:"fa-background-research-wrapper",page:"fa-background-research-page",title:"fa-background-research-title"},N={wrapper:"fa-prompt-wrapper",page:"fa-prompt-page",header:"fa-prompt-header",object:"fa-prompt-object",material:"fa-prompt-material",processing:"fa-prompt-processing",environment:"fa-prompt-environment",use:"fa-prompt-use",module:"fa-prompt-module",button:"fa-prompt-button",title:"fa-prompt-title",textarea:"fa-prompt-textarea",textareaInput:"fa-prompt-textarea-input",note:"fa-prompt-note",optionLabel:"fa-prompt-option-label",radio:"fa-prompt-radio-button",radioInput:"fa-prompt-radio-input",radioGroup:"fa-prompt-radio-group",pairedRadioGroup:"fa-prompt-paired-radio-group",checkbox:"fa-prompt-checkbox",checkboxInput:"fa-prompt-checkbox-input",checkboxGroup:"fa-prompt-checkbox-group",additionalPrompt:"fa-prompt-additional-prompt"},O=a(44),P=a.n(O),A=(P.a.create({baseURL:"https://joleneborrelli-uofa.github.io/material-failures-database"}),"Case Study"),S="Record",M="Material Failures Database",V={object:"Object Properties",material:"Material",processing:"Processing",environment:"Environmental Interactions",use:"Use Case and History"},R={rating:"Rating",inscription:"Inscription",serial_number:"Serial Number",feature:"Features",alloy_designation:"Alloy Designation",type:"Type",grade:"Grade",full_name:"Full Name",class:"Class",crystallinity:"Crystallinity",biodegradibility:"Biodegradibility",recyclability:"Recyclability",toxicity:"Toxicity",manufacturer:"Manufacturer",date:"Manufacturing Date",location:"Manufacturing Location",plant:"Manufacturing Plant",treatment:"Treatment Procedures",joining:"Joining Procedures",machining:"Machining Procedures",shaping:"Shaping Procedures",residual_stress:"Residual Stresses",ambient:"Ambient Factors",light_exposure:"Light Exposure",geographic_location:"Geographic Location",weather_exposure:"Weather Exposure",storage_location:"Storage Location",stress_orientation:"Orientation of Stresses",loading:"Loading",loading_frequency:"Loading Frequency",problem_statement:"Problem Statement",functionality_loss:"Loss of Functionality",failure_date:"Date of Failure",failure_time:"Time of Failure",operation_stage:"Stage of Operation During Failure",specification:"Specifications",record:"Records",operation:"Operation Status",operator_name:"Operator",operational_factor:"Operational Factors"},D="https://joleneborrelli-uofa.github.io",K=a(65);function L(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)("on"),l=Object(u.a)(o,2),d=l[0],p=l[1];Object(n.useEffect)((function(){h()}),[]);var h=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.a.get("/api/display").then((function(e){g(e.data),p("off")})).catch((function(e){console.error("Error getting display list: ".concat(e))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t;t=e.map((function(e,t){var a=e.object_id,n=e.case_study,r=e.record,o=e.thumbnail,l=D+o,s="/case-study/".concat(a),c="/record/".concat(a),u="".concat(m.caseStudyLink," ").concat(m.visibility[n]),d="".concat(m.recordLink," ").concat(m.visibility[r]);return i.a.createElement("li",{key:t,className:m.displayItem},i.a.createElement("img",{alt:"",className:m.displayImage,src:l}),i.a.createElement(K.b,{className:u,to:s},A),i.a.createElement(K.b,{className:d,to:c},S))})),r(t)},f="".concat(m.visibility[d]," ").concat(m.loading);return i.a.createElement("div",null,i.a.createElement("h2",{className:m.mainHeader},M),i.a.createElement("p",{className:f},"Loading. Please wait..."),i.a.createElement("ul",null,a))}var G={add:"Add",next:"Next",prev:"Prev",note:"Notes",download:"Download",pages:["landing","photo","background","prompt"],landing:{title:"You've been assigned the following case",caseTitle:function(e){return"The ".concat(e," Files")},caseNumber:function(e){return"Case #: ".concat(e)},status:"Status:"},photoEvidenceTitle:"A failure occurs! On ".concat(new Date,", you arrive at the scene with your handy field investigation kit and take out your camera."),photoEvidenceSubtitle:"This is the visual evidence you collect.",backgroundResearchTitle:"You head back to the office. To collect background research, you access literature, go online, make phone calls and write emails.",backgroundResearchSubtitle:"This is the data you find.",promptsTitle:"The photos...the background research...How does it all add up? You put on your detective's cap and get to work.",fieldPrompts:{object:{rating:"",inscription:"Are there any inscriptions on the object? What do they tell you about the object?",feature:"What physical features are there on the object?",serial_number:""},material:{full_name:"What is the object made of?",crystallinity:"What kind of crystal structure does the material have?",class:"What material family does it belong to?",recyclability:"Is the object recyclable? Does the recyclability tell you something about the material?",biodegradability:"",alloy_designation:"",grade:"",toxicity:""},processing:{treatment:"What treatment procedures did the object have?",shaping:"What shaping procedures did the object have?",machining:"What machining procedures did the object have?",joining:"What joining procedures did the object have?",residual_stress:"What kind of residual stresses could have been introduced during processing? Did the physical features on the object play a role? What kind of forces could have been created in the object from the residual stresses?",manufacturer:"",date:"",location:"",plant:""},environment:{loading:"What type of loading did the object experience? How frequent did it occur?",ambient:"",light_exposure:"",geographic_location:"",stress_orientation:"",weather_exposure:"",storage_location:""},use:{functionality_loss:"What functionality was lost when the object failed?",operational_factor:"Which factors played a part in the object\u2019s failure during operation or maintenance?",problem_statement:"",failure_time:"",failure_operation_stage:"",specification:"",record:"",operation:"",operator:""}},additionalPrompts:{fractography:"Does the object have cracks and fractures? Draw the object, the cracks and the fractures. Determine the crack and fracture origin(s)."},fault_tree:{fault_tree_title:"With the information you gathered you make a fault tree.",fault_tree_description:"First, decide which generic factors make up the top levels of the fault tree. Then, find specific factors based on the possible mechanisms of failure."}},I=a(81),W=["feature","machining","joining","light_exposure","ambient","weather_exposure","storage_location","specification","record","operation","operational_factor"],F=["class","class_subtype","treatment","treatment_subtype","shaping","shaping_subtype","residual_stress","residual_stress_force","loading","loading_normalcy"],B=["class_button","treatment_button","shaping_button","residual_stress_button","loading_button"],H=["object","material","environment","processing","use"],U=a(59),z=function(){var e=Object(U.random)(0,1e6);return"".concat(e,"-").concat((new Date).getTime())},q=function(e){return e.split("-").shift()},J=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function Y(e){var t=e.title,a=e.caseNumber,n=G.landing,r=j;return i.a.createElement("div",{className:r.page},i.a.createElement("h3",{className:r.title},n.title),i.a.createElement("div",{className:r.logo}),i.a.createElement("h3",{className:r.caseTitle},n.caseTitle(t)),i.a.createElement("h3",{className:r.caseNumber},n.caseNumber(a)),i.a.createElement("h3",{className:r.status},n.status))}function Q(e){var t=e.path,a=e.children,n=D+t;return i.a.createElement("div",{className:"uv","data-config":"","data-uri":n},a)}function X(e){var t=e.manifest,a=w,n=!!t&&t.filter((function(e){return"photo"===e.page})).map((function(e,t){return i.a.createElement(Q,{key:t,path:e.path})}));return i.a.createElement("div",{className:a.page},i.a.createElement("div",{className:a.title},i.a.createElement("h3",null,G.photoEvidenceTitle),i.a.createElement("h3",null,G.photoEvidenceSubtitle)),n)}function Z(e){var t=e.list.map((function(e,t){return i.a.createElement("p",{key:t,className:m.referenceList.reference},e)}));return i.a.createElement("div",{className:m.referenceList.list},t)}var $="_type",ee="_subtype",te="_description",ae="_normalcy",ne="_forces",ie="_frequency";function re(e){var t=function(e){var t=[];for(var o in e){var l=e[o],s=R[o];if(s&&(t.push(i.a.createElement("p",{key:z(),className:b},s)),Object(U.isArray)(l))){var c=l.every((function(e){return Object(U.isString)(e)})),u=l.every((function(e){return Object(U.isPlainObject)(e)}));c&&(l.length>1?t.push(n(l)):t.push(a(l[0]))),u&&t.push(r(l,o))}}return t},a=function(e){return i.a.createElement("p",{key:z(),className:y},J(e))},n=function(e){for(var t=[],a=0;a<e.length;a++)t.push(i.a.createElement("li",{key:a,className:v},J(e[a])));return i.a.createElement("ul",{key:z(),className:_},t)},r=function(e,t){for(var a=[],n=0;n<e.length;n++){var i=Object.keys(e[n]),r=t+$,l=t+te,s=[e[n][t+ee],e[n][t+ae],e[n][t+ne],e[n][t+ie]].filter((function(e){return void 0!==e})),c=i.includes(r)?e[n][r]:"",u=0!==s.length?s.join(", "):"",m=i.includes(l)?e[n][l]:"";a.push(o(c,u,m))}return a},o=function(e,t,a){return t=t?" (".concat(J(t),")"):"",a=a?": ".concat(J(a)):"",i.a.createElement("p",{key:z(),className:y},J(e),t,a)},l=e.recordData,s=e.showViewer,c=void 0===s||s,u=l.manifest,m=l.reference,E=l.object&&l.object.name,x=function(e){var a=[],n=function(e){var t=Object(I.a)({},V),a=Object.keys(e);for(var n in t)a.includes(n)||delete t[n];return t}(e);for(var r in n){var o=e[r],l=t(o);l.length>0&&a.push(i.a.createElement("div",{key:z(),className:h},i.a.createElement("div",{className:f},r),i.a.createElement("div",{className:g},l)))}return a}(l),C=!!m&&i.a.createElement(Z,{list:m}),k=!(!c||!u)&&u.filter((function(e){return"record"===e.page})).map((function(e,t){return i.a.createElement(Q,{key:t,path:e.path})}));return i.a.createElement("div",{className:d},i.a.createElement("h3",{className:p},E),x,C,k)}function oe(e){var t=e.manifest,a=e.recordData,n=T,r=!!t&&t.filter((function(e){return"background"===e.page})).map((function(e,t){return i.a.createElement(Q,{key:t,path:e.path})}));return i.a.createElement("div",{className:n.page},i.a.createElement("div",{className:n.title},i.a.createElement("h3",null,G.backgroundResearchTitle),i.a.createElement("h3",null,G.backgroundResearchSubtitle)),i.a.createElement(re,{showViewer:!1,recordData:a}),r)}var le=a(53),se=a(212),ce=a(213),ue=a(82),me=a(216),de=a(214),pe={object:{feature:["Lip","Groove","Fillet","Ridge","Notch","Hole"]},material:{class:["Metals and alloys","Glasses and ceramics","Polymers","Composites","Natural materials","Other"],class_subtype:["Glass","Non-technical ceramic","Technical ceramic","Ferrous metal","Non-ferrous metal","Precious metal","Rare earth metal","Refractory metal","Elastomer","Thermoplastic","Thermoset plastic","Other"],crystallinity:["Crystalline","Semi-crystalline","Amorphous"]},processing:{treatment:["Surface","Bulk"],treatment_subtype:["Boronizing","Bluing","Anodizing","Carburizing","Decarburizing","Stress","Heat","Polishing","Texturing","Plating","Metallizing","Chromizing","Painting","Printing","Quench","Age hardening","Temper","Normalizing"],shaping:["Casting","Molding","Deformation","Composite forming","Powder","Special methods"],shaping_subtype:["Sand","Die","Investment","Injection","Compression","Blow molding","Rolling","Forging","Drawing","Sintering","HIPing","Slip casting","Hand layup","Filament winding","Resin transfer","Rapid prototype","Layup","Electroform"],joining:["Welding","Heat bonding","Adhesives","Cements","Fastening","Bolting","Riveting","Snap fits","Friction bond"],machining:["Cut","Turn","Plane","Drill","Grind"],residual_stress:["Structural flaw","Temperature variation","Phase transformation","Non-uniform plastic deformation"],residual_stress_force:["Tensile forces","Compressive forces"]},environment:{light_exposure:["Natural","Artificial"],ambient:["Central heating","Ventilation","Air conditioning","Moisture","Temperature variations"],loading_normalcy:["Normal","Abnormal"],loading:["Axial","Bending","Tortional","Dynamic","Tensile mean","Compressive mean","Cyclic","Suddenly applied","Impact","Fatigue"],weather_exposure:["Sun","Wind","Rain","Ice","Snow"],storage_location:["Indoor","Outdoor"]},use:{specification:["Service","Maintenance"],record:["Maintenance","Inspection"],operation:["Intended","Actual"],operational_factor:["Temperature levels","Speed","Pressure","Moisture levels"]}},he={class:[{name:"class",foreignKeys:pe.material.class},{name:"class_subtype",foreignKeys:pe.material.class_subtype}],treatment:[{name:"treatment",foreignKeys:pe.processing.treatment},{name:"treatment_subtype",foreignKeys:pe.processing.treatment_subtype}],shaping:[{name:"shaping",foreignKeys:pe.processing.shaping},{name:"shaping_subtype",foreignKeys:pe.processing.shaping_subtype}],residual_stress:[{name:"residual_stress",foreignKeys:pe.processing.residual_stress},{name:"residual_stress_force",foreignKeys:pe.processing.residual_stress_force}],loading:[{name:"loading",foreignKeys:pe.environment.loading},{name:"loading_normalcy",foreignKeys:pe.environment.loading_normalcy}]},ge=a(215);function fe(e){var t=e.name,a=e.value,n=e.handleTextAreaChange,r=e.labelVisibility,o=N,l="".concat(o.title," ").concat(r);return i.a.createElement("div",{className:o.textarea},i.a.createElement("label",{className:l},G.note),i.a.createElement("textarea",{className:o.textareaInput,name:t,onChange:n,defaultValue:a}))}function be(e){var t=e.title,a=e.children,n=e.visibility,r=N,o="".concat(r.module," ").concat(n);return i.a.createElement("div",{className:o},i.a.createElement("p",{className:r.title},t),a)}function ye(e){var t=e.value,a=e.name,n=e.foreignKeys,r=e.handleCheckboxChange,o=N,l=n.map((function(e){var n=t.get(e);return i.a.createElement("div",{key:z(),className:o.checkbox},i.a.createElement("label",{className:o.optionLabel},e),i.a.createElement("input",{className:o.checkboxInput,type:"checkbox",name:a,value:e,checked:n,onChange:r}))}));return i.a.createElement("div",{className:o.checkboxGroup},l)}function ve(e){var t=e.name,a=e.value,n=void 0===a?"":a,r=e.prompts,o=e.handleChange,l=N,s=C,c=s.on,u=s.off,m=r.length>0?c:u,d="".concat(l.additionalPrompt," ").concat(m),p=r.map((function(e){return i.a.createElement(be,{key:z(),title:e,visibility:c})}));return i.a.createElement("div",{className:d},p,i.a.createElement(fe,{name:t,value:n,labelVisibility:c,handleTextAreaChange:o}))}function _e(e){var t=e.state,a=e.visibility,n=e.additionalPrompts,r=e.handleModuleChange,o=G.fieldPrompts.object,l=N,s=C,c=[].concat(Object(ge.a)(n),[G.additionalPrompts.fractography]);return i.a.createElement("div",{className:l.object},i.a.createElement("div",{className:l.header},V.object),i.a.createElement(be,{title:o.rating,visibility:s[a.rating]},i.a.createElement(fe,{name:"rating",value:t.rating,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.inscription,visibility:s[a.inscription]},i.a.createElement(fe,{name:"inscription",value:t.inscription,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.serial_number,visibility:s[a.serial_number]},i.a.createElement(fe,{name:"serial_number",value:t.serial_number,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.feature,visibility:s[a.feature]},i.a.createElement(ye,{name:"feature",value:t.feature,handleCheckboxChange:r,foreignKeys:pe.object.feature}),i.a.createElement(fe,{name:"feature_note",value:t.feature_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(ve,{name:"object",value:t.additionalPromptText,prompts:c,handleChange:r}))}function Ee(e){var t=e.statekey,a=void 0===t?"":t,n=e.mapkey,r=void 0===n?"":n,o=e.name,l=e.value,s=e.foreignKeys,c=e.handleRadioGroupChange;o="".concat(o,"-").concat(z());var u=N,m=s.map((function(e){var t=l===e;return i.a.createElement("div",{key:z(),className:u.radio},i.a.createElement("label",{className:u.optionLabel},e),i.a.createElement("input",{type:"radio",className:u.radioInput,name:o,value:e,statekey:a,mapkey:r,defaultChecked:t,onChange:c}))}));return i.a.createElement("div",{className:u.radioGroup},m)}function xe(e){var t=e.statekey,a=e.buttonName,n=e.pairedData,r=e.pairedRadioGroup,o=e.handleChange,l=[],s=N;return r.forEach((function(e,a){l.push(i.a.createElement("div",{className:s.pairedRadioGroup,key:z()},i.a.createElement(Ee,{mapkey:a,statekey:t,name:n[0].name,value:e[n[0].name],foreignKeys:n[0].foreignKeys,handleRadioGroupChange:o}),i.a.createElement(Ee,{mapkey:a,statekey:t,name:n[1].name,value:e[n[1].name],foreignKeys:n[1].foreignKeys,handleRadioGroupChange:o})))})),i.a.createElement("div",null,l,i.a.createElement("button",{className:s.button,type:"button",name:a,statekey:t,onClick:o},G.add))}function Ce(e){var t=e.state,a=e.visibility,n=e.additionalPrompts,r=e.handleModuleChange,o=G.fieldPrompts.material,l=N,s=C;return i.a.createElement("div",{className:l.material},i.a.createElement("div",{className:l.header},V.material),i.a.createElement(be,{title:o.full_name,visibility:s[a.full_name]},i.a.createElement(fe,{name:"full_name",value:t.full_name,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.class,visibility:s[a.class]},i.a.createElement(xe,{statekey:"class",buttonName:"class_button",pairedRadioGroup:t.class,pairedData:he.class,handleChange:r}),i.a.createElement(fe,{name:"class_note",value:t.class_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.crystallinity,visibility:s[a.crystallinity]},i.a.createElement(Ee,{name:"crystallinity",value:t.crystallinity,foreignKeys:pe.material.crystallinity,handleRadioGroupChange:r}),i.a.createElement(fe,{name:"crystallinity_note",value:t.crystallinity_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.alloy_designation,visibility:s[a.alloy_designation]},i.a.createElement(fe,{name:"alloy_designation",value:t.alloy_designation,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.grade,visibility:s[a.grade]},i.a.createElement(fe,{name:"grade",value:t.grade,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.recyclability,visibility:s[a.recyclability]},i.a.createElement(fe,{name:"recyclability",value:t.recyclability,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.biodegradability,visibility:s[a.biodegradability]},i.a.createElement(fe,{name:"biodegradability",value:t.biodegradability,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.toxicity,visibility:s[a.toxicity]},i.a.createElement(fe,{name:"toxicity",value:t.toxicity,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(ve,{name:"material",value:t.additionalPromptText,prompts:n,handleChange:r}))}function ke(e){var t=e.state,a=e.visibility,n=e.additionalPrompts,r=e.handleModuleChange,o=G.fieldPrompts.processing,l=N,s=C;return i.a.createElement("div",{className:l.processing},i.a.createElement("div",{className:l.header},V.processing),i.a.createElement(be,{title:o.treatment,visibility:s[a.treatment]},i.a.createElement(xe,{statekey:"treatment",buttonName:"treatment_button",pairedRadioGroup:t.treatment,pairedData:he.treatment,handleChange:r}),i.a.createElement(fe,{name:"treatment_note",value:t.treatment_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.shaping,visibility:s[a.shaping]},i.a.createElement(xe,{statekey:"shaping",buttonName:"shaping_button",pairedRadioGroup:t.shaping,pairedData:he.shaping,handleChange:r}),i.a.createElement(fe,{name:"shaping_note",value:t.shaping_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.residual_stress,visibility:s[a.residualStress]},i.a.createElement(xe,{statekey:"residual_stress",buttonName:"residual_stress_button",pairedRadioGroup:t.residual_stress,pairedData:he.residual_stress,handleChange:r}),i.a.createElement(fe,{name:"residual_stress_note",value:t.residual_stress_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.machining,visibility:s[a.machining]},i.a.createElement(ye,{name:"machining",value:t.machining,handleCheckboxChange:r,foreignKeys:pe.processing.machining}),i.a.createElement(fe,{name:"machining_note",value:t.machining_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.joining,visibility:s[a.joining]},i.a.createElement(ye,{name:"joining",value:t.joining,handleCheckboxChange:r,foreignKeys:pe.processing.joining}),i.a.createElement(fe,{name:"joining_note",value:t.joining_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.manufacturer,visibility:s[a.manufacturer]},i.a.createElement(fe,{name:"manufacturer",value:t.manufacturer,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.date,visibility:s[a.date]},i.a.createElement(fe,{name:"date",value:t.date,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.location,visibility:s[a.location]},i.a.createElement(fe,{name:"location",value:t.location,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(be,{title:o.plant,visibility:s[a.plant]},i.a.createElement(fe,{name:"plant",value:t.plant,labelVisibility:s.off,handleTextAreaChange:r})),i.a.createElement(ve,{name:"processing",value:t.additionalPromptText,prompts:n,handleChange:r}))}function je(e){var t=e.state,a=e.visibility,n=e.additionalPrompts,r=e.handleModuleChange,o=G.fieldPrompts.environment,l=N,s=C;return i.a.createElement("div",{className:l.environment},i.a.createElement("div",{className:l.header},V.environment),i.a.createElement(be,{title:o.light_exposure,visibility:s[a.light_exposure]},i.a.createElement(ye,{name:"light_exposure",value:t.light_exposure,handleCheckboxChange:r,foreignKeys:pe.environment.light_exposure}),i.a.createElement(fe,{name:"light_exposure_note",value:t.light_exposure_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.ambient,visibility:s[a.ambient]},i.a.createElement(ye,{name:"ambient",value:t.ambient,handleCheckboxChange:r,foreignKeys:pe.environment.ambient}),i.a.createElement(fe,{name:"ambient_note",value:t.ambient_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.weather_exposure,visibility:s[a.weather_exposure]},i.a.createElement(ye,{name:"weather_exposure",value:t.weather_exposure,handleCheckboxChange:r,foreignKeys:pe.environment.weather_exposure}),i.a.createElement(fe,{name:"weather_exposure_note",value:t.weather_exposure_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.storage_location,visibility:s[a.storage_location]},i.a.createElement(ye,{name:"storage_location",value:t.storage_location,handleCheckboxChange:r,foreignKeys:pe.environment.storage_location}),i.a.createElement(fe,{name:"storage_location_note",value:t.storage_location_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.geographic_location,visibility:s[a.geographic_location]},i.a.createElement(fe,{name:"geographic_location",value:t.geographic_location,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.stress_orientation,visibility:s[a.interaction_stress]},i.a.createElement(fe,{name:"stress_orientation",value:t.stress_orientation,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.loading,visibility:s[a.interaction_loading]},i.a.createElement(xe,{statekey:"loading",buttonName:"loading_button",pairedRadioGroup:t.loading,pairedData:he.loading,handleChange:r}),i.a.createElement(fe,{name:"loading_note",value:t.loading_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(ve,{name:"environment",value:t.additionalPromptText,prompts:n,handleChange:r}))}function we(e){var t=e.state,a=e.visibility,n=e.additionalPrompts,r=e.handleModuleChange,o=G.fieldPrompts.use,l=N,s=C;return i.a.createElement("div",{className:l.use},i.a.createElement("div",{className:l.header},V.use),i.a.createElement(be,{title:o.specification,visibility:s[a.specification]},i.a.createElement(ye,{name:"specification",value:t.specification,handleCheckboxChange:r,foreignKeys:pe.use.specification}),i.a.createElement(fe,{name:"specification_note",value:t.light_exposure_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.record,visibility:s[a.record]},i.a.createElement(ye,{name:"record",value:t.record,handleCheckboxChange:r,foreignKeys:pe.use.record}),i.a.createElement(fe,{name:"record_note",value:t.ambient_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.operation,visibility:s[a.operation]},i.a.createElement(ye,{name:"operation",value:t.operation,handleCheckboxChange:r,foreignKeys:pe.use.operation}),i.a.createElement(fe,{name:"operation_note",value:t.weather_exposure_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.operational_factor,visibility:s[a.operational_factor]},i.a.createElement(ye,{name:"operational_factor",value:t.operational_factor,handleCheckboxChange:r,foreignKeys:pe.use.operational_factor}),i.a.createElement(fe,{name:"operational_factor_note",value:t.operational_factor_note,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.functionality_loss,visibility:s[a.functionality_loss]},i.a.createElement(fe,{name:"functionality_loss",value:t.functionality_loss,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.problem_statement,visibility:s[a.problem_statement]},i.a.createElement(fe,{name:"problem_statement",value:t.problem_statement,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.failure_time,visibility:s[a.failure_time]},i.a.createElement(fe,{name:"failure_time",value:t.failure_time,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.failure_operation_stage,visibility:s[a.failure_operation_stage]},i.a.createElement(fe,{name:"failure_operation_stage",value:t.failure_operation_stage,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(be,{title:o.operator,visibility:s[a.operator]},i.a.createElement(fe,{name:"operator",value:t.operator,labelVisibility:s.on,handleTextAreaChange:r})),i.a.createElement(ve,{name:"use",value:t.additionalPromptText,prompts:n,handleChange:r}))}var Te=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(se.a)(this,a),(n=t.call(this,e)).state={rating:"",inscription:"",serial_number:"",feature:new Map,feature_note:"",full_name:"",class:new Map([["0",{class:"",class_subtype:""}]]),class_note:"",crystallinity:"",crystallinity_note:"",alloy_designation:"",grade:"",recyclability:"",biodegradability:"",toxicity:"",machining:new Map,machining_note:"",joining:new Map,joining_note:"",manufacturer:"",date:"",location:"",plant:"",treatment:new Map([["0",{treatment:"",treatment_subtype:""}]]),treatment_note:"",shaping:new Map([["0",{shaping:"",shaping_subtype:""}]]),shaping_note:"",residual_stress:new Map([["0",{residual_stress:"",residual_stress_force:""}]]),residual_stress_note:"",light_exposure:new Map,light_exposure_note:"",ambient:new Map,ambient_note:"",loading:new Map([["0",{loading:"",loading_normalcy:""}]]),loading_note:"",weather_exposure:new Map,weather_exposure_note:"",storage_location:new Map,storage_location_note:"",geographic_location:"",stress_orientation:"",specification:new Map,specification_note:"",record:new Map,record_note:"",operation:new Map,operation_note:"",operational_factor:new Map,operational_factor_note:"",functionality_loss:"",problem_statement:"",failure_time:"",failure_operation_stage:"",operator:"",additionalPromptText:new Map},n.handleModuleChange=n.handleModuleChange.bind(Object(ue.a)(n)),n.downloadState=n.downloadState.bind(Object(ue.a)(n)),n}return Object(ce.a)(a,[{key:"downloadState",value:function(){var e=function(e){var t=W,a=F,n="";for(var i in e){var r=e[i];if(Object(U.isString)(r)&&r){var o="",l=i.split("_"),s=l.length-1;o="".concat(R[i],": ").concat(r," \n"),"note"===l[s]&&(o="Notes: ".concat(r," \n")),n+=o}if(r.constructor===Map){if(t.includes(i)&&function(){var e=[];r.forEach((function(t,a){return!!t&&e.push(a)})),e.length>0&&(n+="".concat(R[i],": ").concat(e.join(", ")," \n"))}(),a.includes(i)){var c="";Array.from(r.values()).forEach((function(e){var t=Object.keys(e);e[t[0]]&&e[t[1]]&&(c+="".concat(e[t[0]],": ").concat(e[t[1]]," \n"))})),c&&(n+="".concat(R[i]," \n").concat(c))}if("additionalPromptText"===i){var u="";r.forEach((function(e,t){e&&(u+="".concat(V[t],": ").concat(e," \n"))})),u&&(n+="Module Notes: \n"+u)}}}return n}(this.state),t=new Blob([e],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="case-study-notes.txt",document.body.appendChild(a),a.addEventListener("click",(function e(){setTimeout((function(){URL.revokeObjectURL(t),a.removeEventListener("click",e)}),150)}),!1),a.click()}},{key:"handleAdditionalPromptChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState((function(e){return{additionalPromptText:e.additionalPromptText.set(n,a)}}))}},{key:"handleGenericChange",value:function(e){var t=e.target.value,a=q(e.target.name);this.setState(Object(le.a)({},a,t))}},{key:"handleCheckboxChange",value:function(e){var t=e.target,a=t.value,n=t.checked,i=q(e.target.name);this.setState((function(e){return Object(le.a)({},i,e[i].set(a,n))}))}},{key:"handlePairedRadioGroupChange",value:function(e){var t=e.target.value,a=q(e.target.name),n=e.target.getAttribute("mapkey"),i=e.target.getAttribute("statekey"),r=this.state[i].get(n)||{};this.setState((function(e){return Object(le.a)({},i,e[i].set(n,Object(I.a)(Object(I.a)({},r),{},Object(le.a)({},a,t))))}))}},{key:"handleButtonClick",value:function(e){var t=e.target.getAttribute("statekey"),a=Array.from(this.state[t].keys()),n=parseInt(a[a.length-1],10);if(!(n>20)){var i=++n+"",r=he[t].map((function(e){return e.name})).reduce((function(e,t){return e[t]="",e}),{});this.setState((function(e){return Object(le.a)({},t,e[t].set(i,r))}))}}},{key:"handleModuleChange",value:function(e){var t=q(e.target.name),a=W,n=F,i=B;return H.includes(t)?this.handleAdditionalPromptChange(e):a.includes(t)?this.handleCheckboxChange(e):n.includes(t)?this.handlePairedRadioGroupChange(e):i.includes(t)?this.handleButtonClick(e):void this.handleGenericChange(e)}},{key:"render",value:function(){var e=this.props,t=e.visibility,a=e.additionalPrompts,n={rating:this.state.rating,inscription:this.state.inscription,serial_number:this.state.serial_number,feature:this.state.feature,feature_note:this.state.feature_note,additionalPromptText:this.state.additionalPromptText.get("object")},r={fulle_name:this.state.fulle_name,class:this.state.class,class_note:this.state.class_note,crystallinity:this.state.crystallinity,crystallinity_note:this.state.crystallinity_note,alloy_designation:this.state.alloy_designation,grade:this.state.grade,recyclability:this.state.recyclability,biodegradability:this.state.biodegradability,toxicity:this.state.toxicity,additionalPromptText:this.state.additionalPromptText.get("material")},o={machining:this.state.machining,machining_note:this.state.machining_note,joining:this.state.joining,joining_note:this.state.joining_note,manufacturer:this.state.manufacturer,date:this.state.date,location:this.state.location,plant:this.state.plant,treatment:this.state.treatment,treatment_note:this.state.treatment_note,shaping:this.state.shaping,shaping_note:this.state.shaping_note,residual_stress:this.state.residual_stress,residual_stress_note:this.state.residual_stress_note,additionalPromptText:this.state.additionalPromptText.get("processing")},l={light_exposure:this.state.light_exposure,ambient:this.state.ambient,loading:this.state.loading,weather_exposure:this.state.weather_exposure,storage_location:this.state.storage_location,geographic_location:this.state.geographic_location,stress_orientation:this.state.stress_orientation,additionalPromptText:this.state.additionalPromptText.get("environment")},s={specification:this.state.specification,record:this.state.record,operation:this.state.operation,operational_factor:this.state.operational_factor,operational_factor_note:this.state.operational_factor_note,functionality_loss:this.state.functionality_loss,problem_statement:this.state.problem_statement,failure_time:this.state.failure_time,failure_operation_stage:this.state.failure_operation_stage,operator:this.state.operator,additionalPromptText:this.state.additionalPromptText.get("use")};return i.a.createElement("div",null,i.a.createElement("div",{className:N.page},i.a.createElement(_e,{state:n,visibility:t.object,additionalPrompts:a.object,handleModuleChange:this.handleModuleChange}),i.a.createElement(Ce,{state:r,visibility:t.material,additionalPrompts:a.material,handleModuleChange:this.handleModuleChange}),i.a.createElement(ke,{state:o,visibility:t.processing,additionalPrompts:a.processing,handleModuleChange:this.handleModuleChange}),i.a.createElement(je,{state:l,visibility:t.environment,additionalPrompts:a.environment,handleModuleChange:this.handleModuleChange}),i.a.createElement(we,{state:s,visibility:t.use,additionalPrompts:a.use,handleModuleChange:this.handleModuleChange})),i.a.createElement("div",{className:x.wrapper},i.a.createElement("button",{type:"button",className:x.button,value:"download",onClick:this.downloadState},G.download)))}}]),a}(i.a.Component);function Ne(e){var t=e.visibility,a=e.studyData,r=a.manifest,o=Object(n.useState)(0),l=Object(u.a)(o,2),s=l[0],c=l[1],m=Object(n.useState)(C.on),d=Object(u.a)(m,2),p=d[0],h=d[1],g=Object(n.useState)(C.off),f=Object(u.a)(g,2),b=f[0],y=f[1],v=function(e){var t,a=C.on,n=C.on,i=e.target.value,r=G.pages.length-1;"prev"===i&&(t=s-1),"next"===i&&(t=s+1),t<=0&&(t=0,n=C.off),t>=r&&(t=r,a=C.off),c(t),h(a),y(n)},_=a.object&&a.object.name,x=a.object&&a.object.object_id,O=function(e){var t={};for(var a in V){var n=[];e[a]&&e[a].additional_prompt&&(n=e[a].additional_prompt),t[a]=n}return t}(a),P=G.pages.map((function(e,t){return s===t?C.on:C.off})),A="".concat(P[0]," ").concat(j.wrapper),S="".concat(P[1]," ").concat(w.wrapper),M="".concat(P[2]," ").concat(T.wrapper),R="".concat(P[3]," ").concat(N.wrapper),D="".concat(k.prev," ").concat(b),K="".concat(k.next," ").concat(p);return i.a.createElement("div",null,i.a.createElement("div",{className:E},i.a.createElement("div",{className:A},i.a.createElement(Y,{title:_,caseNumber:x})),i.a.createElement("div",{className:S},i.a.createElement(X,{manifest:r})),i.a.createElement("div",{className:M},i.a.createElement(oe,{manifest:r,recordData:a})),i.a.createElement("div",{className:R},i.a.createElement(Te,{additionalPrompts:O,visibility:t}))),i.a.createElement("div",{className:k.page},i.a.createElement("button",{type:"button",className:K,value:"next",onClick:v},G.next),i.a.createElement("button",{type:"button",className:D,value:"prev",onClick:v},G.prev)))}function Oe(e){var t=e.id,a=Object(n.useState)("on"),r=Object(u.a)(a,2),o=r[0],l=r[1],d=Object(n.useState)({}),p=Object(u.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)({}),b=Object(u.a)(f,2),y=b[0],v=b[1];Object(n.useEffect)((function(){x()}),[]);var _=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.a.get("/api/visibility/prompt",{params:{id:t}}).then((function(e){return e.data})).catch((function(e){console.error("Error getting prompt visibility: ".concat(e))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/visibility/field",{params:{id:t}}).then((function(e){return e.data})).catch((function(e){console.error("Error getting field visibility: ".concat(e))}));case 2:return a=e.sent,e.abrupt("return",P.a.get("/api/study",{params:{id:t,visibleTables:a}}).then((function(e){return e.data})).catch((function(e){console.error("Error getting case study fields: ".concat(e))})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,e.next=5,E();case 5:a=e.sent,g(t),v(a),l("off");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="".concat(m.visibility[o]," ").concat(m.loading),k=!(!Object.keys(h).length||!Object.keys(y).length)&&i.a.createElement(Ne,{visibility:h,studyData:y});return i.a.createElement("div",null,i.a.createElement("p",{className:C},"Loading. Please wait..."),k)}function Pe(e){var t=e.id,a=Object(n.useState)("on"),r=Object(u.a)(a,2),o=r[0],l=r[1],d=Object(n.useState)({}),p=Object(u.a)(d,2),h=p[0],g=p[1];Object(n.useEffect)((function(){f()}),[]);var f=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.a.get("/api/record",{params:{id:t}}).then((function(e){var t=e.data;g(t),l("off")})).catch((function(e){console.error("Error getting record fields: ".concat(e))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b="".concat(m.visibility[o]," ").concat(m.loading),y=!!Object.keys(h).length&&i.a.createElement(re,{recordData:h});return i.a.createElement("div",null,i.a.createElement("p",{className:b},"Loading. Please wait..."),y)}var Ae=a(18);function Se(){var e=!1,t=Object(Ae.f)(),a=t.page,n=void 0===a?"record":a,r=t.id;return"case-study"===n&&(e=i.a.createElement(Oe,{id:r})),"record"===n&&(e=i.a.createElement(Pe,{id:r})),e}function Me(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/material-failures-database",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),"process.env"),i.a.createElement(K.a,{basename:"".concat("/material-failures-database","/")},i.a.createElement("div",null,i.a.createElement(Ae.c,null,i.a.createElement(Ae.a,{exact:!0,path:"/",component:L}),i.a.createElement(Ae.a,{path:"/:page/:id",exact:!0,component:Se}))))}o.a.render(i.a.createElement(i.a.StrictMode,null," ",i.a.createElement(Me,null)," "),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.be2a5461.chunk.js.map